const Reel=function(e,t=0){this.reelMap=conf.imgMap.shuffle().map(((e,t)=>({offsetY:conf.reel.height*conf.imgStartPts[t],key:e}))),this.fnc=null,this.spinning=!1,this.finalAnimation=!1,this.clickTime=0,this.showedLastAnim=!1,this.clicked=!1,this.mode="random",this.fixedPlace="top",this.fixedImg="BAR",this.finalShapes=[];const i=function(i="BAR",f=0,n=0){conf.img.hasOwnProperty(i)&&(e.clearRect(t,conf.height,conf.reel.width,conf.height),e.strokeStyle="#000",e.filter=`blur(${n}px)`,e.lineWidth=4,e.fillRect(t,f,conf.reel.width,conf.reel.height),e.strokeRect(t,f,conf.reel.width,conf.reel.height),e.drawImage(conf.img[i],t,f),e.filter="none")};this.spinAnimation=function(e){this.spinning&&this.reelMap.forEach((e=>{e.offsetY+=conf.pSkip,e.offsetY>=conf.height&&(e.offsetY=-3*conf.reel.height),i(e.key,e.offsetY,4)}))},this.generateReelShapesFixed=function(){let e=conf.imgMap.filter((e=>e!==this.fixedImg)),t=e.rnd();e.splice(e.indexOf(t),1);let i=e.rnd();switch(this.fixedPlace){case"top":return[{offsetY:-60,key:this.fixedImg,stop:0},{offsetY:60,key:t,stop:120},{offsetY:180,key:i,stop:240}];case"middle":return[{offsetY:-120,key:t,stop:-60},{offsetY:0,key:this.fixedImg,stop:60},{offsetY:120,key:i,stop:180}];default:return[{offsetY:-180,key:t,stop:-120},{offsetY:-60,key:i,stop:0},{offsetY:60,key:this.fixedImg,stop:120}]}},this.generateReelShapesRandom=function(){let e=conf.imgMap.map((e=>e)),t=e.rnd();e.splice(e.indexOf(t),1);let i=e.rnd();e.splice(e.indexOf(i),1);let f=e.rnd(),n=[0,60].rnd();return[{offsetY:-120+n,key:t,stop:-60+n},{offsetY:0+n,key:i,stop:60+n},{offsetY:120+n,key:f,stop:180+n}]},this.setFinalShapes=function(){return"fixed"===this.mode?this.generateReelShapesFixed():this.generateReelShapesRandom()},this.spin2point=function(){if(!this.finalAnimation)return void("function"==typeof this.fnc&&(this.fnc(),this.fnc=null));let e;this.finalShapes.forEach((t=>{t.hasOwnProperty("stop")&&(e=t.stop);t.offsetY+6===e&&(this.finalAnimation=!1),t.offsetY+=6,i(t.key,t.offsetY)}))},this.done=function(e){this.fnc=e}};
//# sourceMappingURL=index.a640ba0d.js.map
